### 项目记忆归档

#### 用户偏好
1. 使用中文回答问题
2. 对于一些安全的命令，比如创建目录、初始化项目等不会造成破坏性影响的操作，可以自行执行，无需用户确认
3. 对于一些比较复杂的命令，提示用户手动执行
4. 记忆要进行归档，以便新会话能了解之前的记忆

#### 项目需求
- 项目目标是搭建一个通过可交互示例学习React 19的工程化教学平台，具备知识管理系统(KMS)功能
- 使用Next.js 15、React 19、Tailwind CSS、MDX 2.0
- 需要启用Rust编译器，支持混合渲染模式（SSG + ISR）和边缘函数支持文档服务
- 目录结构需符合规范，双屏学习界面，左侧实时演示，右侧同步文档
- 自动文档归档，示例与文档双向关联

#### 示例开发指南

### 1. 文件结构规范

每个示例都应遵循以下文件结构：
```
src/app/lab/[exampleId]/
├── page.tsx              # 页面布局
├── demo/                 # 示例组件目录
│   └── {exampleId}.tsx  # 示例组件实现
└── docs/                # 文档目录
    └── {exampleId}.mdx  # MDX 文档
```

### 2. 开发流程

1. **准备阶段**
   - 确定示例主题和难度级别
   - 在 `examples.json` 中添加示例元数据
   - 创建必要的目录结构

2. **组件开发**
   - 在 `demo/` 目录下创建示例组件
   - 确保组件是独立的，不依赖外部状态
   - 添加适当的类型定义和注释
   - 实现错误处理和加载状态

3. **文档编写**
   - 在 `docs/` 目录下创建 MDX 文档
   - 严格遵循文档系统规范
   - 确保代码示例可运行
   - 添加完整的使用说明和最佳实践

4. **质量检查**
   - 代码质量检查
   - 文档完整性检查
   - 交互功能测试
   - 移动端适配检查

### 3. 示例开发清单

#### 基础 Hooks
- [x] useState
- [ ] useEffect
- [ ] useContext
- [ ] useReducer
- [ ] useCallback
- [ ] useMemo
- [ ] useRef

#### 进阶 Hooks
- [ ] useImperativeHandle
- [ ] useLayoutEffect
- [ ] useDebugValue
- [ ] useTransition
- [ ] useDeferredValue

#### 组件模式
- [ ] 受控组件
- [ ] 非受控组件
- [ ] 复合组件
- [ ] 高阶组件
- [ ] Render Props

#### 状态管理
- [ ] Context + useReducer
- [ ] 状态提升
- [ ] 状态下推
- [ ] 状态分片

#### 性能优化
- [ ] 组件懒加载
- [ ] 状态批量更新
- [ ] 列表优化
- [ ] 缓存策略

### 4. 开发注意事项

1. **代码规范**
   - 使用 TypeScript 编写所有组件
   - 遵循函数式编程原则
   - 保持组件的纯函数特性
   - 使用 ESLint 和 Prettier 保持代码风格一致

2. **性能考虑**
   - 合理使用 useMemo 和 useCallback
   - 避免不必要的重渲染
   - 实现代码分割和懒加载
   - 优化大型列表渲染

3. **可访问性**
   - 添加适当的 ARIA 属性
   - 确保键盘可访问性
   - 提供合适的颜色对比度
   - 支持屏幕阅读器

4. **用户体验**
   - 添加适当的加载状态
   - 实现错误边界处理
   - 提供清晰的反馈机制
   - 确保响应式设计

### 5. 文档模板

每个新示例都应该包含以下基本部分：

```markdown
---
exampleId: "示例ID"
title: "示例标题"
description: "示例描述"
difficulty: 1-5
category: "分类"
tags: ["相关标签"]
relatedComponents: ["相关组件路径"]
dependencies: ["依赖项"]
---

# 标题

## 为什么需要？
[说明使用场景和解决的问题]

## 核心概念
[解释关键概念和原理]

## 实现步骤
[代码示例和说明]

## 使用说明
[基本用法]

## 进阶用法
[高级特性]

## 注意事项
[常见问题和解决方案]

## 最佳实践
[推荐用法和反面示例]

## 相关资源
[学习资源和文档链接]

## 下一步学习
[学习路径建议]
```

### 6. 开发优先级

1. **第一阶段：基础 Hooks**
   - useState 
   - useEffect
   - useContext
   - useReducer

2. **第二阶段：组件模式**
   - 受控组件
   - 复合组件
   - 高阶组件

3. **第三阶段：状态管理**
   - Context 集成
   - 状态管理模式

4. **第四阶段：性能优化**
   - 性能优化技巧
   - 最佳实践示例

### 7. 质量保证

每个示例发布前必须：
1. 通过所有 TypeScript 类型检查
2. 通过 ESLint 检查
3. 确保文档完整性
4. 测试所有示例代码
5. 检查移动端适配
6. 验证可访问性要求

### 8. 更新记录

- 2025-02-16: 完成 useState 示例和文档
- [后续更新记录...]

### 9. 示例代码开发经验

#### 示例代码最佳实践
1. **组件结构**
   - 每个示例独立封装成组件
   - 相关的示例组合在一起
   - 使用语义化的组件命名

2. **文档集成**
   - 说明文字直接集成在组件中
   - 关键代码片段随示例展示
   - 避免分散的文档维护

3. **交互设计**
   - 每个示例都可以实际操作
   - 提供即时的视觉反馈
   - 展示多种使用场景

4. **代码展示**
   - 使用代码块展示关键实现
   - 添加必要的代码注释
   - 保持代码片段简洁

5. **HTML 结构**
   - 遵循 HTML 语义化规范
   - 正确的标签嵌套关系
   - 合理使用 ARIA 属性

6. **样式规范**
   - 统一使用 Tailwind CSS
   - 保持组件间视觉一致性
   - 响应式设计适配

7. **性能考虑**
   - 合理使用状态管理
   - 避免不必要的渲染
   - 优化加载性能

#### 常见问题及解决方案

1. **文档与代码同步**
   - 问题：文档和代码容易出现不一致
   - 解决：将文档直接集成在示例组件中，确保同步更新

2. **代码可读性**
   - 问题：示例代码过于复杂难以理解
   - 解决：拆分成多个简单的子示例，每个聚焦一个要点

3. **交互体验**
   - 问题：用户难以理解示例的用途
   - 解决：添加清晰的说明和可交互的演示

4. **HTML 规范**
   - 问题：HTML 结构不符合规范
   - 解决：严格遵循 HTML 语义化规则，正确使用标签

#### 开发流程改进

1. **示例规划**
   - 先规划示例的知识点
   - 设计合适的交互方式
   - 准备相关的代码片段

2. **组件开发**
   - 实现核心功能
   - 添加说明文档
   - 集成代码展示

3. **质量检查**
   - 验证功能完整性
   - 检查代码规范
   - 测试交互体验

4. **持续优化**
   - 收集用户反馈
   - 优化交互体验
   - 更新示例内容

### 10. 技术债务记录

1. **需要优化的部分**
   - [ ] 统一所有示例的样式风格
   - [ ] 添加更多的错误处理示例
   - [ ] 优化移动端的显示效果

2. **待解决的问题**
   - [ ] 改进代码高亮显示
   - [ ] 添加示例搜索功能
   - [ ] 实现示例之间的关联导航

3. **未来计划**
   - [ ] 添加单元测试
   - [ ] 实现示例评分系统
   - [ ] 支持用户反馈功能

### 11. 更新日志

#### 2025-02-16
- 完善了 useState 示例的实现
- 优化了示例代码的展示方式
- 改进了文档与代码的集成方案
- 修复了 HTML 结构问题

#### 待完成任务
- [ ] 实现 useEffect 示例
- [ ] 实现 useContext 示例
- [ ] 实现 useReducer 示例
- [ ] 补充更多的高级用法示例

### 12. 代码展示优化记录

#### 实现方案
1. **技术选型**
   - 选择 react-syntax-highlighter 作为代码高亮方案
   - 使用 VSCode Dark Plus 主题提供专业的代码展示效果
   - 支持 TypeScript 语法高亮

2. **组件封装**
   - 创建统一的 Markdown 组件
   - 支持自定义样式扩展
   - 保持组件的可复用性

3. **性能优化**
   - 按需加载语法高亮库
   - 优化代码块渲染性能
   - 减少不必要的重渲染

#### 最佳实践总结

1. **代码展示**
   ```typescript
   // ✅ 推荐的代码展示方式
   const codeString = `const [state, setState] = useState(initialValue);
   // 更新状态说明
   setState(newValue);`;

   return <Markdown>{codeString}</Markdown>;

   // ❌ 不推荐的方式
   return <code>{`const [state, setState] = useState(initialValue);`}</code>;
   ```

2. **样式处理**
   ```typescript
   // ✅ 推荐的样式处理
   <Markdown className="bg-gray-50 p-3 rounded" />

   // ❌ 不推荐使用内联样式
   <div style={{ background: '#f7f7f7', padding: '12px' }}>
     <code>...</code>
   </div>
   ```

3. **组件复用**
   ```typescript
   // ✅ 推荐的组件封装
   interface MarkdownProps {
     children: string;
     className?: string;
   }

   // ❌ 避免重复实现代码高亮逻辑
   const CodeBlock = ({ code }) => {
     // 重复的高亮实现...
   };
   ```

#### 遇到的问题及解决方案

1. **样式冲突**
   - 问题：Markdown 样式与全局样式冲突
   - 解决：使用独立的样式作用域，避免样式污染

2. **代码换行**
   - 问题：长代码行显示不完整
   - 解决：添加适当的换行和缩进，保持代码可读性

3. **响应式适配**
   - 问题：移动端代码展示效果不佳
   - 解决：添加响应式样式，优化移动端显示

#### 后续优化计划

1. **功能增强**
   - [ ] 添加代码复制功能
   - [ ] 支持多种主题切换
   - [ ] 添加行号显示

2. **性能优化**
   - [ ] 实现代码分割
   - [ ] 优化首次加载时间
   - [ ] 添加加载占位符

3. **用户体验**
   - [ ] 添加语法错误提示
   - [ ] 支持代码折叠
   - [ ] 优化代码搜索功能

### 13. 更新日志
